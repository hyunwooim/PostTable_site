{"version":3,"file":"js/535.3b7169bd.js","mappings":"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","sources":["webpack://vue/./src/views/gallery.vue","webpack://vue/./src/views/gallery.vue?a94e"],"sourcesContent":["<template>\n    <div class=\"gallery-container\">\n        <header class=\"gallery-header\">\n            <h1>Gallery</h1>\n            <button class=\"btn\" @click=\"openUploadPopup\">Upload</button>\n        </header>\n\n        <div class=\"date-filter\">\n            <label>From: <input type=\"date\" v-model=\"fromDate\" /></label>\n            <label>To: <input type=\"date\" v-model=\"toDate\" /></label>\n        </div>\n\n        <!-- Gallery grid -->\n        <section class=\"gallery-grid\" @change=\"handleSelectChange\">\n            <div\n                v-for=\"image in flatFilteredImages\"\n                :key=\"image.id\"\n                class=\"gallery-item\"\n            >\n                <img\n                    @click=\"openImagePopup(image)\"\n                    :src=\"`/file/photo/${image.images[0].id}${image.images[0].format}`\"\n                />\n            </div>\n        </section>\n\n        <!-- Upload Popup -->\n        <div v-if=\"showPopup\" class=\"popup\">\n            <div class=\"popup-content\">\n                <h2>Upload Image</h2>\n                <form @submit.prevent=\"handleUpload\">\n                    <input type=\"file\" accept=\"image/png, image/jpeg, image/gif\" @change=\"handleFileChange\" multiple />\n                    <textarea v-model=\"newImageDescription\" placeholder=\"Enter description\"></textarea>\n                    <div class=\"popup-actions\">\n                        <button class=\"cncl_btn\" type=\"button\" @click=\"closeUploadPopup\">Cancel</button>\n                        <button class=\"btn\" type=\"submit\">Upload</button>\n                    </div>\n                </form>\n            </div>\n        </div>\n\n        <!-- Image Detail Popup -->\n        <div v-if=\"showImagePopup\" class=\"popup\" style=\"z-index:3;\">\n            <div class=\"popup-content popup-image-detail\">\n                <div class=\"popup-left\">\n\n                    <div class=\"wrapper\">\n                        <div class=\"carousel-container\">\n                        <flicking\n                            @ready = \"onFlickingSelected\"\n                            @changed = \"onFlickingSelected\"\n                          :options=\"{ renderOnlyVisible: true }\"\n                          :plugins=\"flickingPlugins\"\n                          style=\"max-width:800px; position: relative;\"\n                        >\n                            <div\n                                v-for=\"img in selectedImage.images\"\n                                :key=\"img.id\"\n                                class=\"flicking-panel\"\n                            >\n                                <img :src=\"`/file/photo/${img.id}${img.format}`\"  class=\"gallery-popup-item\"/>\n                            </div>\n\n                        </flicking>\n                            <button class=\"flicking-arrow-prev\">{{ prevArrowWord }}</button>\n                            <button class=\"flicking-arrow-next\">{{ nextArrowWord }}</button>\n                        </div>\n                    </div>\n                    <!-- 여기에 flicking\n                                       <img :src=\"`/file/photo/${selectedImage.id}${selectedImage.format}`\"/>-->\n                </div>\n                <div class=\"popup-right\">\n                    <h4>{{ selectedImage.date }}</h4>\n                    <h6>{{ selectedImage.description }}</h6>\n                    <div class=\"popup-footer\">\n                        <button class=\"del_btn\" @click=\"deleteImage(selectedImage)\">delete</button>\n                        <button class=\"btn\" @click=\"closeImagePopup\">Close</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { nextTick } from 'vue';\nimport Flicking  from \"@egjs/vue3-flicking\";\nimport \"@egjs/vue3-flicking/dist/flicking.css\";\nimport { onMounted, ref, computed } from \"vue\";\nimport axios from 'axios';\nimport { Arrow } from \"@egjs/flicking-plugins\";\n\nexport default {\n    name: \"GalleryView\",\n    components: {\n        Flicking,\n    },\n\n    setup() {\n        // const selectedY = ref(\"\");\n        // const selectedM = ref(\"\");\n        // const selectedD = ref(\"\");\n        const images = ref({});\n        const showPopup = ref(false);\n        const showImagePopup = ref(false);\n        const selectedImage = ref(null);\n        const newImageFile = ref(null);\n        const newImageDescription = ref(\"\");\n        const fromDate = ref('');\n        const toDate = ref('');\n\n        const arrowPrev = ref(null);\n        const arrowNext = ref(null);\n        const flickingPlugins = ref([]);\n        const prevArrowWord = ref('');\n        const nextArrowWord = ref('');\n\n        const canGoPrev = ref(false);\n        const canGoNext = ref(false);\n        const flickingRef = ref(null); // setup 내부에 선언\n\n        // Load images from API\n        const referImage = () => {\n            images.value = {};\n            axios.get('/api/photo/get')\n                .then(response => {\n                    const originImages = response.data;\n                    originImages.forEach(image => {\n                        const [y, m, d] = image.createdAtDate.split('-');\n                        if (!images.value[y]) {\n                            images.value[y] = {};\n                        }\n                        if (!images.value[y][m]) {\n                            images.value[y][m] = {};\n                        }\n                        if (!images.value[y][m][d]) {\n                            images.value[y][m][d] = [];\n                        }\n                        images.value[y][m][d].push(image);\n                    });\n                })\n                .catch(error => console.error('이미지 불러오는데 실패했습니다:', error));\n        };\n        console.log(images.value)\n        // Open/Close popups\n\n\n\n\n        const onFlickingSelected = (e) =>{\n            console.log(e.currentTarget, selectedImage.value.images.length)\n            let index = e.currentTarget.index\n            if (index ==0 && selectedImage.value.images.length == 1){\n                prevArrowWord.value = \"\";\n                nextArrowWord.value = \"\";\n            } else if (index != 0 && e.index != selectedImage.value.images.length - 1 && selectedImage.value.images.length > 1) {\n                prevArrowWord.value = \"<\";\n                nextArrowWord.value = \">\";\n            } else if (index == selectedImage.value.images.length - 1 && selectedImage.value.images.length > 1) {\n                prevArrowWord.value = \"<\";\n                nextArrowWord.value = \"\";\n            } else if (index == 0 && selectedImage.value.images.length > 1) {\n                prevArrowWord.value = \"\";\n                nextArrowWord.value = \">\";\n            }\n        };\n        const openImagePopup = (image) => {\n            selectedImage.value = image;\n            showImagePopup.value = true;\n\n            nextTick(() => {\n                flickingPlugins.value = [\n                    new Arrow({\n                        parentEl: document.querySelector(\".carousel-container\"),\n                        prevEl: \".flicking-arrow-prev\",\n                        nextEl: \".flicking-arrow-next\",\n                        classPrefix: '',\n                    }),\n                ];\n\n                nextTick(() => {\n                    const flickingInstance = flickingRef.value?.getInstance?.();\n                    if (flickingInstance) {\n                        const updateArrows = () => {\n                            canGoPrev.value = flickingInstance.canMovePrev();\n                            canGoNext.value = flickingInstance.canMoveNext();\n                        };\n                        flickingInstance.on(\"moveEnd\", updateArrows);\n                        flickingInstance.on(\"ready\", updateArrows);\n                        updateArrows();\n                    }\n                });\n            });\n        };\n        const closeImagePopup = () => showImagePopup.value = false;\n\n        // Handle file change and upload\n        const handleFileChange = (event) => {\n            newImageFile.value = event.target.files;\n        };\n\n        const openUploadPopup = () => {\n            showPopup.value = true;\n        };\n\n        const closeUploadPopup =() =>{\n            showPopup.value = false;\n        }\n\n        const handleUpload = () => {\n            if (newImageFile.value) {\n                let formData = new FormData();\n                for(let i = 0; i < newImageFile.value.length; i++){\n                    formData.append(\"file\", newImageFile.value[i]);\n                }\n                formData.append(\"description\", newImageDescription.value.replace(/\\n/g, \"<br>\"));\n                formData.append(\"token\", localStorage.getItem(\"jwtToken\"))\n\n                console.log(formData)\n                axios.post('/api/photo/upload/', formData, { headers: { 'Content-Type': 'multipart/form-data' } })\n                    .then(response => {\n                        console.log('이미지 업로드 성공:', response.data);\n                        closeUploadPopup();\n                        referImage();\n                    })\n                    .catch(error => console.error('이미지 업로드 실패:', error));\n            }\n        };\n\n        // Delete image\n        const deleteImage = (images) => {\n            console.log(images)\n            axios.delete('/api/photo/delete', { data:  images  })\n                .then(response => {\n                    console.log(response.data);\n                    closeImagePopup();\n                    referImage();\n                })\n                .catch(error => console.error('이미지 삭제 실패:', error));\n        };\n\n        const filteredImages = (imagesList) => {\n            if (!fromDate.value && !toDate.value) return imagesList;\n\n            return imagesList.filter(image => {\n                const imageDate = new Date(image.createdAtDate);\n                const from = fromDate.value ? new Date(fromDate.value) : null;\n                const to = toDate.value ? new Date(toDate.value) : null;\n\n                if (from && imageDate < from) return false;\n                if (to && imageDate > to) return false;\n                return true;\n            });\n        };\n\n        // Flat filtered images for gallery grid\n        const flatFilteredImages = computed(() => {\n            const allImages = [];\n\n            Object.values(images.value).forEach(months =>\n                Object.values(months).forEach(days =>\n                    Object.values(days).forEach(dayList =>\n                        allImages.push(...filteredImages(dayList))\n                    )\n                )\n            );\n            allImages.sort((a,b) => new Date(b.createdAtDate +\"T\" +b.createdAtTime)- new Date(a.createdAtDate +\"T\"+ a.createdAtTime))\n\n            return allImages;\n        });\n\n        onMounted(() => {\n\n            referImage();\n        });\n        return {\n            closeUploadPopup,list:[1,2,3,4,5],\n            images, showPopup, showImagePopup, selectedImage, handleFileChange,\n            handleUpload, openImagePopup, closeImagePopup, deleteImage,\n            fromDate, toDate, filteredImages\n            ,Flicking,\n            flatFilteredImages,\n            flickingPlugins,\n            openUploadPopup,newImageDescription,\n            arrowPrev,\n            arrowNext,\n            canGoPrev,\n            canGoNext,\n            prevArrowWord,\n            nextArrowWord,\n            onFlickingSelected,\n            flickingRef,\n        };\n    }\n};\n</script>\n\n\n<style scoped>\n/* h1,h4,h6{\n  font-weight: bold;\n} */\nbody {\n  font-family: Arial, sans-serif;\n  margin: 0;\n  padding: 0;\n  background-color: #f9f9f9;\n}\n\n.flicking-arrow-next,\n.flicking-arrow-prev\n{\n    -webkit-text-stroke: 2px black;\n    color: white;\n    background-color: transparent;\n}\n\n\n.gallery-container {\npadding: 20px;\n}\n\n.gallery-header {\ndisplay: flex;\njustify-content: space-between;\nalign-items: center;\n}\n\n.btn {\npadding: 10px 20px;\nbackground-color: #007bff;\ncolor: white;\nborder: none;\nborder-radius: 5px;\ncursor: pointer;\n}\n\n.btn:hover {\n  background-color: #173c64;\n}\n\n\n.cncl_btn {\npadding: 10px 20px;\nbackground-color: #ffffff;\ncolor: rgb(0, 0, 0);\nborder: none;\nborder-radius: 5px;\ncursor: pointer;\noutline: 1px solid #000;\n\n}\n\n.cncl_btn:hover {\n  background-color: #cac8c8;\n}\n\n.del_btn {\npadding: 10px 20px;\nbackground-color: #ff0000;\ncolor: rgb(255, 255, 255);\nborder: none;\nborder-radius: 5px;\ncursor: pointer;\noutline: 1px solid #ffffff;\n\n}\n\n.del_btn:hover {\n  background-color: #ececec;\n  outline: 1px solid #ff0000;\n  color: #ff0000\n}\n\n.gallery-grid {\ndisplay: grid;\ngrid-template-columns: repeat(auto-fit, minmax(100px, 1fr));\ngap: 10px;\nmargin-top: 20px;\n}\n\n.gallery-item {\nwidth: 100%;\npadding-top: 100%;\nposition: relative;\nbackground-color: transparent;\n}\n\n.gallery-item img,m {\nposition: absolute;\ntop: 0;\nleft: 0;\nwidth: 100%;\nheight: 100%;\nobject-fit:scale-down;\nborder-radius: 5px;\n}\n\n\n.gallery-popup-item img {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n    border-radius: 5px;\n}\n\n.popup {\nposition: fixed;\ntop: 0;\nleft: 0;\nwidth: 100%;\nheight: 100%;\nbackground-color: rgba(0, 0, 0, 0.5);\ndisplay: flex;\njustify-content: center;\nalign-items: center;\n}\n\n.popup-content {\nbackground-color: white;\npadding: 20px;\nborder-radius: 10px;\nwidth: 90%;\nmax-width: 450px;\n}\n\n.popup-actions {\ndisplay: flex;\njustify-content: flex-end;\ngap: 10px;\n}\n.popup-image-detail {\n  display: flex;\n  flex-direction: row;\n  gap: 20px;\n  max-width: 800px; /* 팝업 전체의 최대 너비 설정 */\n  width: 90%;\n}\n\n.popup-left img {\n  max-width: 120%; /* 이미지의 가로 크기를 컨테이너에 맞춤 */\n  max-height: 120px; /* 이미지의 최대 높이를 제한 */\n  object-fit: contain; /* 이미지 비율을 유지하며 축소 */\n  border-radius: 10px; /* 이미지 모서리 라운딩 */\n}\n\n\n\n.popup-right {\n  flex: 1; /* 설명 부분이 이미지와 균형을 맞추도록 설정 */\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  overflow-y: auto; /* 내용이 길 경우 스크롤 가능 */\n}\n\n.popup-right h4 {\n  font-size: 15px;\n  margin: 0;\n}\n\n.popup-right h6 {\n  font-size: 14px;\n  color: #666;\n  margin: 0;\n}\n\n.popup-footer {\n  display: flex;\n  justify-content: flex-end; /* 버튼을 오른쪽 정렬 */\n  margin-top: auto; /* 하단으로 밀어내기 */\n  align-self: flex-end; /* 우측 정렬 */\n  margin-bottom: 10px; /* 하단 여백 */\n}\n\n\n\n\ntextarea {\nwidth: 95%;\nheight: 80px;\nmargin-top: 10px;\npadding: 10px;\nborder: 1px solid #ccc;\nborder-radius: 5px;\nresize: none;\n}\n\n\n\n\n.carousel-container {\n  position: relative;\n  max-width: 1000px;\n  margin: auto;\n  text-align: center;\n}\n\n\n\n.flicking-panel {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: auto;\n}\n\n.flicking-panel img {\n  max-width: 100%;\n  max-height: 100%;\n  object-fit: contain;\n  border-radius: 10px;\n}\n\n.date-filter {\n  display: flex;\n  gap: 10px;\n  margin-bottom: 20px;\n  align-items: center;\n}\n\n.date-filter label {\n  font-weight: bold;\n}\n\n.date-filter input {\n  margin-left: 5px;\n  padding: 5px;\n}\n</style>","import { render } from \"./gallery.vue?vue&type=template&id=32eef610&scoped=true\"\nimport script from \"./gallery.vue?vue&type=script&lang=js\"\nexport * from \"./gallery.vue?vue&type=script&lang=js\"\n\nimport \"./gallery.vue?vue&type=style&index=0&id=32eef610&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-32eef610\"]])\n\nexport default __exports__"],"names":["class","key","style","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onClick","_cache","args","$setup","openUploadPopup","_hoisted_3","_createTextVNode","type","$event","fromDate","toDate","onChange","_ctx","handleSelectChange","_Fragment","_renderList","flatFilteredImages","image","id","openImagePopup","src","images","format","_hoisted_4","showPopup","_hoisted_5","_hoisted_6","onSubmit","_withModifiers","handleUpload","accept","handleFileChange","multiple","newImageDescription","placeholder","_hoisted_7","closeUploadPopup","_createCommentVNode","showImagePopup","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_createVNode","_component_flicking","onReady","onFlickingSelected","onChanged","options","renderOnlyVisible","plugins","flickingPlugins","default","_withCtx","selectedImage","img","_hoisted_13","_","_hoisted_14","_toDisplayString","prevArrowWord","_hoisted_15","nextArrowWord","_hoisted_16","date","description","_hoisted_17","deleteImage","closeImagePopup","name","components","Flicking","setup","ref","newImageFile","arrowPrev","arrowNext","canGoPrev","canGoNext","flickingRef","referImage","value","axios","then","response","originImages","data","forEach","y","m","d","createdAtDate","split","push","catch","error","console","log","e","currentTarget","length","index","nextTick","Arrow","parentEl","document","querySelector","prevEl","nextEl","classPrefix","flickingInstance","getInstance","updateArrows","canMovePrev","canMoveNext","on","event","target","files","formData","FormData","i","append","replace","localStorage","getItem","headers","filteredImages","imagesList","filter","imageDate","Date","from","to","computed","allImages","Object","values","months","days","dayList","sort","a","b","createdAtTime","onMounted","list","__exports__","render"],"sourceRoot":""}