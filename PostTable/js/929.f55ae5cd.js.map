{"version":3,"file":"js/929.f55ae5cd.js","mappings":"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","sources":["webpack://vue/./src/views/modify.vue","webpack://vue/./src/views/modify.vue?7055"],"sourcesContent":["<template>\n    <div class=\"container\">\n      <div class=\"header\">\n        <h1>글 수정</h1>\n      </div>\n  \n      <form @submit.prevent=\"handleSubmit\">\n        <div class=\"form-group\">\n          <input\n            class=\"form-content\"\n            type=\"text\"\n            id=\"title\"\n            v-model=\"form.title\"\n            placeholder=\"제목을 입력하세요\"\n            required\n            maxlength=\"29\"\n          />\n        </div>\n  \n        <br />\n  \n        <div class=\"form-group\">\n          <el-tiptap\n            v-if=\"content !== ''\"\n            v-model:content=\"content\"\n            :extensions=\"extensions\"\n            :enable-char-count=\"false\"\n            lang=\"en\"\n            placeholder=\"Write something...\"\n            height=\"500px\"\n            @onUpdate=\"onEditorUpdate\"\n          />\n        </div>\n  \n        <div class=\"form-actions\">\n          <button type=\"submit\">저장</button>\n          <button type=\"button\" @click=\"cancel\">취소</button>\n        </div>\n      </form>\n    </div>\n</template>\n\n<script>\nimport { ref, reactive, onMounted, watch } from 'vue';\nimport { useRouter, useRoute } from 'vue-router';\nimport axios from 'axios';\nimport css from 'highlight.js/lib/languages/css';\nimport js from 'highlight.js/lib/languages/javascript';\nimport ts from 'highlight.js/lib/languages/typescript';\nimport html from 'highlight.js/lib/languages/xml';\nimport { lowlight } from 'lowlight';\nimport {\nDoc,\nText,\nParagraph,\nBold,\nUnderline,\nItalic,\nTextAlign,\nFontSize,\nHeading,\ncodeView,\nImage,\nStrike,\nBulletList,\nOrderedList,\nTable,\nLink,\nIframe,\nCodeBlockLowlight,\nBlockquote,\nTaskList,\nIndent,\nLineHeight,\nHorizontalRule,\nHardBreak,\nHistory,\nFormatClear,\nColor,\nHighlight,\nFullscreen,\nSelectAll,\nFontFamily,\nGapcursor,\nCommands,\ngetSuggestionItems,\nrenderItems,\n} from 'element-tiptap-vue3-fixed';\n\n// 코드 블록 하이라이팅 설정\nlowlight.registerLanguage('html', html);\nlowlight.registerLanguage('css', css);\nlowlight.registerLanguage('js', js);\nlowlight.registerLanguage('ts', ts);\n\nexport default {\nname: \"WritePostPage\",\n\nsetup() {\n    const router = useRouter();\n    const route = useRoute();\n    const id = route.params.id;\n\n    const content = ref('');\n    const form = reactive({ title: '' });\n\n    const extensions = reactive([\n    Doc,\n    Text,\n    Paragraph,\n    Bold,\n    Underline.configure({ bubble: true }),\n    Italic.configure({ bubble: true }),\n    TextAlign.configure({ bubble: true }),\n    FontSize,\n    Heading,\n    codeView,\n    Image,\n    Strike,\n    BulletList,\n    OrderedList,\n    Table.configure({ resizable: true }),\n    Link.configure({ bubble: true }),\n    Iframe,\n    CodeBlockLowlight.configure({ lowlight }),\n    Blockquote,\n    TaskList,\n    Indent,\n    LineHeight,\n    HorizontalRule,\n    HardBreak,\n    History,\n    FormatClear,\n    Color,\n    Highlight,\n    Fullscreen,\n    SelectAll,\n    FontFamily,\n    Gapcursor,\n    Commands.configure({\n        suggestion: {\n        items: getSuggestionItems,\n        render: renderItems,\n        },\n    }),\n    ]);\n    const userId = ref(\"\")\n    // 게시글 데이터를 가져오는 함수\n    const fetchPost = async () => {\n    try {\n        const response = await axios.get(`/api/post/getPost/id/${id}`);\n\n        axios.post(\"/api/protected/userId\",null,\n            {\n                headers: {\n                    Authorization: `Bearer ${localStorage.getItem(\"jwtToken\")}`,\n                    userId: response.data.userId\n                }\n            }).then(response => { console.log(response.data)\n            if(response.status != 202){\n                alert(\"수정 권한이 없습니다.\")\n\n                router.push('/PostTable');\n                return;\n            }})\n        userId.value = response.data.userId;\n        content.value = response.data.content;\n        form.title = response.data.title;\n    } catch (error) {\n        console.error(\"Error fetching post:\", error);\n    }\n    };\n\n    // 에디터 내용 변경 시 content 반영\n    const onEditorUpdate = (val) => {\n    content.value = val;\n    };\n\n    // 글 저장 함수\n    const handleSubmit = async () => {\n    try {\n        axios.post(\"/api/protected/userId\",null,\n        {\n            headers: {\n                Authorization: `Bearer ${localStorage.getItem(\"jwtToken\")}`,\n                userId: userId.value\n            }\n        }).then(response => { console.log(response.data)\n        if(response.status != 202){alert(\"수정 권한이 없습니다.\")\n        router.push('/PostTable');\n        return;\n        }})\n\n        if (!content.value || content.value.trim() === \"\") {\n        alert(\"내용을 입력해주세요.\");\n        return;\n        }\n\n        await axios.post('/api/post/modify', {\n        id : id,\n        userId: userId,\n        title: form.title,\n        content: content.value,\n        });\n\n        alert(\"글이 저장되었습니다!\");\n        router.push('/PostTable');\n    } catch (error) {\n        console.error(\"Error during post submission:\", error);\n        alert('글 저장에 실패했습니다.');\n    }\n    };\n\n    // 취소 버튼 클릭 시\n    const cancel = () => {\n    if (confirm(\"작성을 취소하시겠습니까? 수정하기 전으로 저장됩니다.\")) {\n        router.push(\"/PostTable\");\n    }\n    };\n\n    // content 값 변경 감지 (디버깅용)\n    watch(content, () => {\n    console.log('Content updated');\n    });\n\n    // 마운트될 때 게시글 데이터 가져오기\n    onMounted(fetchPost);\n\n    return {\n    content,\n    form,\n    extensions,\n    onEditorUpdate,\n    handleSubmit,\n    cancel,\n    };\n},\n};\n</script>\n\n<style scoped>\n.container {\nmax-width: 800px;\nmargin: 0 auto;\npadding: 20px;\n}\n\n.header h1 {\ntext-align: center;\n}\n\n.form-group input {\nwidth: 97%;\npadding: 10px;\nborder: 1px solid #ccc;\nborder-radius: 5px;\nfont-size: 1rem;\n}\n\n.form-actions {\ndisplay: flex;\njustify-content: space-between;\n}\n\nbutton {\npadding: 10px 20px;\nborder: none;\nborder-radius: 5px;\nfont-size: 1rem;\ncursor: pointer;\n}\n\nbutton[type=\"submit\"] {\nbackground-color: #007bff;\ncolor: white;\n}\n\nbutton[type=\"submit\"]:hover {\nbackground-color: #0056b3;\n}\n\nbutton[type=\"button\"] {\nbackground-color: #f5f5f5;\ncolor: black;\n}\n\nbutton[type=\"button\"]:hover {\nbackground-color: #e0e0e0;\n}\n</style>","import { render } from \"./modify.vue?vue&type=template&id=850f67a2&scoped=true\"\nimport script from \"./modify.vue?vue&type=script&lang=js\"\nexport * from \"./modify.vue?vue&type=script&lang=js\"\n\nimport \"./modify.vue?vue&type=style&index=0&id=850f67a2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-850f67a2\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","onSubmit","_cache","_withModifiers","args","$setup","handleSubmit","_hoisted_2","type","id","$event","form","title","placeholder","required","maxlength","_hoisted_3","content","_createBlock","_component_el_tiptap","key","extensions","lang","height","onOnUpdate","onEditorUpdate","_createCommentVNode","_hoisted_4","onClick","cancel","lowlight","registerLanguage","html","css","js","ts","name","setup","router","useRouter","route","useRoute","params","ref","reactive","Doc","Text","Paragraph","Bold","Underline","configure","bubble","Italic","TextAlign","FontSize","Heading","codeView","Image","Strike","BulletList","OrderedList","Table","resizable","Link","Iframe","CodeBlockLowlight","Blockquote","TaskList","Indent","LineHeight","HorizontalRule","HardBreak","History","FormatClear","Color","Highlight","Fullscreen","SelectAll","FontFamily","Gapcursor","Commands","suggestion","items","getSuggestionItems","render","renderItems","userId","fetchPost","async","response","axios","headers","Authorization","localStorage","getItem","data","then","console","log","status","alert","push","value","error","val","trim","confirm","watch","onMounted","__exports__"],"sourceRoot":""}