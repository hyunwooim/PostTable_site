"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[929],{5929:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var o=n(6768),a=n(5130);const r={class:"container"},l={class:"form-group"},s={class:"form-group"},i={class:"form-actions"};function u(e,t,n,u,c,d){const g=(0,o.g2)("el-tiptap");return(0,o.uX)(),(0,o.CE)("div",r,[t[6]||(t[6]=(0,o.Lk)("div",{class:"header"},[(0,o.Lk)("h1",null,"글 수정")],-1)),(0,o.Lk)("form",{onSubmit:t[3]||(t[3]=(0,a.D$)(((...e)=>u.handleSubmit&&u.handleSubmit(...e)),["prevent"]))},[(0,o.Lk)("div",l,[(0,o.bo)((0,o.Lk)("input",{class:"form-content",type:"text",id:"title","onUpdate:modelValue":t[0]||(t[0]=e=>u.form.title=e),placeholder:"제목을 입력하세요",required:"",maxlength:"29"},null,512),[[a.Jo,u.form.title]])]),t[5]||(t[5]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("div",s,[""!==u.content?((0,o.uX)(),(0,o.Wv)(g,{key:0,content:u.content,"onUpdate:content":t[1]||(t[1]=e=>u.content=e),extensions:u.extensions,"enable-char-count":!1,lang:"en",placeholder:"Write something...",height:"500px",onOnUpdate:u.onEditorUpdate},null,8,["content","extensions","onOnUpdate"])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",i,[t[4]||(t[4]=(0,o.Lk)("button",{type:"submit"},"저장",-1)),(0,o.Lk)("button",{type:"button",onClick:t[2]||(t[2]=(...e)=>u.cancel&&u.cancel(...e))},"취소")])],32)])}n(4114);var c=n(144),d=n(1387),g=n(788),p=n.n(g),h=n(5990),b=n(7494),f=n(582),v=n(2608),m=n(4641),k=n(1750);m.l.registerLanguage("html",v.A),m.l.registerLanguage("css",h.A),m.l.registerLanguage("js",b.A),m.l.registerLanguage("ts",f.A);var L={name:"WritePostPage",setup(){const e=(0,d.rd)(),t=(0,d.lq)(),n=t.params.id,a=(0,c.KR)(""),r=(0,c.Kh)({title:""}),l=(0,c.Kh)([k.JA,k.EY,k.fz,k.yN,k.z2.configure({bubble:!0}),k.J2.configure({bubble:!0}),k.nO.configure({bubble:!0}),k.Z4,k.DZ,k.codeView,k._V,k.n,k.Rg,k._J,k.XI.configure({resizable:!0}),k.N_.configure({bubble:!0}),k.vL,k.dz.configure({lowlight:m.l}),k.Cv,k._0,k.Tg,k.aK,k.d$,k.BX,k.BZ,k.dv,k.Q1,k.f4,k.gl,k.kN,k.ay,k.vR,k.Ts.configure({suggestion:{items:k.$5,render:k.$}})]),s=(0,c.KR)(""),i=async()=>{try{const t=await p().get(`/api/post/getPost/id/${n}`);p().post("/api/protected/userId",null,{headers:{Authorization:`Bearer ${localStorage.getItem("jwtToken")}`,userId:t.data.userId}}).then((t=>{if(console.log(t.data),202!=t.status)return alert("수정 권한이 없습니다."),void e.push("/PostTable")})),s.value=t.data.userId,a.value=t.data.content,r.title=t.data.title}catch(t){console.error("Error fetching post:",t)}},u=e=>{a.value=e},g=async()=>{try{if(p().post("/api/protected/userId",null,{headers:{Authorization:`Bearer ${localStorage.getItem("jwtToken")}`,userId:s.value}}).then((t=>{if(console.log(t.data),202!=t.status)return alert("수정 권한이 없습니다."),void e.push("/PostTable")})),!a.value||""===a.value.trim())return void alert("내용을 입력해주세요.");await p().post("/api/post/modify",{id:n,userId:s,title:r.title,content:a.value}),alert("글이 저장되었습니다!"),e.push("/PostTable")}catch(t){console.error("Error during post submission:",t),alert("글 저장에 실패했습니다.")}},h=()=>{confirm("작성을 취소하시겠습니까? 수정하기 전으로 저장됩니다.")&&e.push("/PostTable")};return(0,o.wB)(a,(()=>{console.log("Content updated")})),(0,o.sV)(i),{content:a,form:r,extensions:l,onEditorUpdate:u,handleSubmit:g,cancel:h}}},y=n(1241);const I=(0,y.A)(L,[["render",u],["__scopeId","data-v-850f67a2"]]);var w=I}}]);
//# sourceMappingURL=929.ff851417.js.map